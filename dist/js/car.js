"use strict";$(function(){$.ajax({type:"post",url:"/ifloaded",dataType:"json",success:function(n){n.loaded&&($(".load>li:eq(0)").html("<a >你好，".concat(decodeURI(Cookie.get("name")),"</a>")),$(".load>li:eq(1)").html('<a href="./login.html">注销</a>'),$(".load>li:eq(1)>a").click(function(){$.ajax({type:"post",url:"/cancel",dataType:"json",success:function(n){console.log(n)}}),alert("已注销该账户，请重新登录！")}))}});var i=JSON.parse(localStorage.getItem("cartList"));function n(){var n=i.every(function(n){return 1==n.isSelect}),a='<div class="car con">\n      <div class="car-head">\n        <div class="check">\n          <input id="sAll"type="checkbox" name="all-select" '.concat(n?"checked":"",'/>全选\n        </div>\n        <div class="img">&nbsp;</div>\n        <div class="name">商品名称</div>\n        <div class="price">单价</div>\n        <div class="number" id="num">数量</div>\n        <div class="total">小计</div>\n        <div class="action">操作</div>\n      </div>\n      <div class="car-body">\n      ');i.forEach(function(n){a+='<div class="item-box" >\n          <div class="check"><input class="select" data-name=\''.concat(n.name,'\'type="checkbox" name="all-select" ').concat(n.isSelect?"checked":"",'/></div>\n          <div class="img">\n            <img\n              src=').concat(n.src,'\n              alt=""\n            />\n          </div>\n          <div class="name">\n            ').concat(n.name,'\n          </div>\n          <div class="price">').concat(n.price,'</div>\n          <div class="number">\n                <img class="sub" data-name=\'').concat(n.name,'\'\n                  src="https://demo.demohuo.top/jquery/20/2068/demo/images/shangpinxiangqing/X15.png"\n                />\n                <input class="input" value=').concat(n.number,' />\n                <img class="add" data-name=\'').concat(n.name,'\'\n                  src="https://demo.demohuo.top/jquery/20/2068/demo/images/shangpinxiangqing/16.png"\n                />\n          </div>\n          <div class="total">').concat(n.xiaoji,'</div>\n          <div class="action"><button data-name=\'').concat(n.name,"'>×</button></div>\n        </div>")});var c=i.filter(function(n){return n.isSelect}),t=0,e=0;c.forEach(function(n){t+=n.number,e+=1*n.xiaoji}),a+='\n      </div>\n    </div>\n    <div class="car-foot con">\n      <a href="../pages/index.html">继续购物</a>\n      <span>共<i>'.concat(i.length,"</i>总商品，已选择<em>").concat(t,"</em>件</span>\n      <button  ").concat(c.length?"id='buy'":"disabled",">去结算</button>\n      <span>合计：<em>").concat(e,"</em>元</span>\n    </div>"),$(".cart").html(a)}console.log(i),i?(n(),$(".cart").on("change","#sAll",function(){var a=this;i.forEach(function(n){n.isSelect=a.checked}),n(),localStorage.setItem("cartList",JSON.stringify(i))}),$(".cart").on("change",".select",function(){var a=$(this).data("name");i.forEach(function(n){n.name==a&&(n.isSelect=!n.isSelect)}),n(),localStorage.setItem("cartList",JSON.stringify(i))}),$(".cart").on("click",".sub",function(){var a=$(this).data("name");i.forEach(function(n){n.name==a&&(1<n.number&&n.number--,n.xiaoji=n.price*n.number)}),n(),localStorage.setItem("cartList",JSON.stringify(i))}),$(".cart").on("click",".add",function(){var a=$(this).data("name");i.forEach(function(n){n.name==a&&(n.number++,n.xiaoji=n.price*n.number)}),n(),localStorage.setItem("cartList",JSON.stringify(i))}),$(".cart").on("click",".action button",function(){var c,t=$(this).data("name");i.forEach(function(n,a){n.name==t&&(c=a)}),i.splice(c,1),n(),localStorage.setItem("cartList",JSON.stringify(i))})):alert("您的购物车为空！")});